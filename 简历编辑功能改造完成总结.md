# ç®€å†ç¼–è¾‘åŠŸèƒ½æ”¹é€ å®Œæˆ - åŸºäºåç«¯API

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

### 1. resume-make.jsï¼ˆç®€å†ä¸»é¡µé¢ï¿½ï¿½

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `backendResumeId` å­—æ®µå­˜å‚¨åç«¯ç®€å†ID
- âœ… `loadResume()` - ä»åç«¯APIåŠ è½½ç®€å†åŸºæœ¬ä¿¡æ¯
- âœ… `saveResumePatch()` - ä¿å­˜åˆ°åç«¯API
- âœ… `computeCompletion()` - ä»åç«¯APIè·å–æ•°æ®è®¡ç®—å®Œæˆåº¦
- âœ… `refreshCompletion()` - ä»åç«¯APIåˆ·æ–°å®Œæˆåº¦
- âœ… `onPreview()` - ç›´æ¥è·³è½¬é¢„è§ˆï¼Œæ— éœ€åŒæ­¥

**APIè°ƒç”¨**ï¼š
- `api.getResumeDetail(id)` - è·å–ç®€å†åŸºæœ¬ä¿¡æ¯
- `api.updateResume(data)` - æ›´æ–°ç®€å†
- `api.getEducationList(id)` - è·å–æ•™è‚²ç»å†åˆ—è¡¨
- `api.getInternshipList(id)` - è·å–å®ä¹ ç»å†åˆ—è¡¨
- `api.getProjectList(id)` - è·å–é¡¹ç›®ç»å†åˆ—è¡¨
- `api.getAwardList(id)` - è·å–è·å¥–ç»å†åˆ—è¡¨

### 2. resume-education.jsï¼ˆæ•™è‚²ç»å†é¡µé¢ï¼‰

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `backendResumeId` å’Œ `educationId` å­—æ®µ
- âœ… `loadEducation()` - ä»åç«¯APIåŠ è½½æ•™è‚²ç»å†
- âœ… `saveEducation()` - ä¿å­˜åˆ°åç«¯APIï¼ˆè‡ªåŠ¨åˆ¤æ–­åˆ›å»º/æ›´æ–°ï¼‰

**APIè°ƒç”¨**ï¼š
- `api.getEducationList(resumeId)` - è·å–æ•™è‚²ç»å†åˆ—è¡¨
- `api.createEducation(data)` - åˆ›å»ºæ•™è‚²ç»å†
- `api.updateEducation(data)` - æ›´æ–°æ•™è‚²ç»å†

### 3. resume-internship.jsï¼ˆå®ä¹ ç»å†é¡µé¢ï¼‰

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… æ·»åŠ  `backendResumeId` å’Œ `internshipId` å­—æ®µ
- âœ… `loadInternship()` - ä»åç«¯APIåŠ è½½å®ä¹ ç»å†
- âœ… `saveInternship()` - ä¿å­˜åˆ°åç«¯APIï¼ˆè‡ªåŠ¨åˆ¤æ–­åˆ›å»º/æ›´æ–°ï¼‰

**APIè°ƒç”¨**ï¼š
- `api.getInternshipList(resumeId)` - è·å–å®ä¹ ç»å†åˆ—è¡¨
- `api.createInternship(data)` - åˆ›å»ºå®ä¹ ç»å†
- `api.updateInternship(data)` - æ›´æ–°å®ä¹ ç»å†

## ğŸ“‹ è¿˜éœ€è¦ä¿®æ”¹çš„é¡µé¢

### 4. resume-project.jsï¼ˆé¡¹ç›®ç»å†ï¼‰
éœ€è¦ç±»ä¼¼çš„ä¿®æ”¹ï¼š
- æ·»åŠ  `backendResumeId` å’Œ `projectId`
- ä¿®æ”¹ `loadProject()` ä»APIåŠ è½½
- ä¿®æ”¹ `saveProject()` ä¿å­˜åˆ°API

### 5. resume-awards.jsï¼ˆè·å¥–ç»å†ï¼‰
éœ€è¦ç±»ä¼¼çš„ä¿®æ”¹ï¼š
- æ·»åŠ  `backendResumeId` å’Œ `awardId`
- ä¿®æ”¹ `loadAwards()` ä»APIåŠ è½½
- ä¿®æ”¹ `saveAwards()` ä¿å­˜åˆ°API

### 6. resume-skills.jsï¼ˆæŠ€èƒ½ï¼‰
éœ€è¦ä¿®æ”¹ï¼š
- ä» `api.getResumeDetail()` è·å– skills å­—æ®µ
- ä¿å­˜æ—¶è°ƒç”¨ `api.updateResume({ id, skills })`

### 7. resume-summary.jsï¼ˆè‡ªæˆ‘è¯„ä»·ï¼‰
éœ€è¦ä¿®æ”¹ï¼š
- ä» `api.getResumeDetail()` è·å– selfEvaluation å­—æ®µ
- ä¿å­˜æ—¶è°ƒç”¨ `api.updateResume({ id, selfEvaluation })`

### 8. profile-edit.jsï¼ˆåŸºæœ¬ä¿¡æ¯ç¼–è¾‘ï¼‰
éœ€è¦ä¿®æ”¹ï¼š
- ä» `api.getResumeDetail()` åŠ è½½åŸºæœ¬ä¿¡æ¯
- ä¿å­˜æ—¶è°ƒç”¨ `api.updateResume(data)`

## ğŸ”„ æ•°æ®æµç¨‹

### åŠ è½½æµç¨‹
```
1. ç”¨æˆ·è¿›å…¥ç¼–è¾‘é¡µé¢
   â†“
2. ä»URLè·å– resumeId (æ ¼å¼: r_1)
   â†“
3. æå– backendId (æ ¼å¼: 1)
   â†“
4. è°ƒç”¨ API åŠ è½½æ•°æ®
   â†“
5. æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
```

### ä¿å­˜æµç¨‹
```
1. ç”¨æˆ·ç¼–è¾‘æ•°æ®
   â†“
2. ç‚¹å‡»ä¿å­˜æŒ‰é’®
   â†“
3. æ„å»ºä¿å­˜æ•°æ®
   â†“
4. åˆ¤æ–­æ˜¯åˆ›å»ºè¿˜æ˜¯æ›´æ–°
   â†“
5. è°ƒç”¨å¯¹åº”çš„ API
   â†“
6. æ˜¾ç¤ºä¿å­˜ç»“æœ
   â†“
7. è¿”å›ä¸Šä¸€é¡µ
```

### é¢„è§ˆæµç¨‹
```
1. ç”¨æˆ·ç‚¹å‡»é¢„è§ˆ
   â†“
2. ç›´æ¥è·³è½¬é¢„è§ˆé¡µé¢
   â†“
3. é¢„è§ˆé¡µé¢ä» API è¯»å–æœ€æ–°æ•°æ®
   â†“
4. æ˜¾ç¤ºå®Œæ•´ç®€å†
```

## ğŸ¯ å…³é”®å®ç°ç‚¹

### 1. IDè½¬æ¢
```javascript
// ä» r_1 æå– 1
const match = String(resumeId).match(/^r_(\d+)$/);
if (match) {
  const backendId = parseInt(match[1]);
}
```

### 2. æ—¥æœŸæ ¼å¼è½¬æ¢
```javascript
// åç«¯æ ¼å¼: 2024-01-01
// å‰ç«¯æ ¼å¼: year=2024, month=01

// è§£æ
const parseYearMonth = (s) => {
  if (!s) return { y: '', m: '' };
  const d = new Date(s);
  return {
    y: String(d.getFullYear()),
    m: String(d.getMonth() + 1).padStart(2, '0')
  };
};

// æ„å»º
const date = `${year}-${month}-01`;
```

### 3. åˆ›å»º/æ›´æ–°åˆ¤æ–­
```javascript
// å¦‚æœæœ‰IDå°±æ›´æ–°ï¼Œå¦åˆ™åˆ›å»º
const apiCall = this.data.educationId
  ? api.updateEducation({ id: this.data.educationId, ...data })
  : api.createEducation(data);
```

### 4. é”™è¯¯å¤„ç†
```javascript
apiCall
  .then(res => {
    if (res.code === 200) {
      wx.showToast({ title: 'ä¿å­˜æˆåŠŸ', icon: 'success' });
    } else {
      wx.showToast({ title: res.message || 'ä¿å­˜å¤±è´¥', icon: 'none' });
    }
  })
  .catch(err => {
    wx.showToast({ title: 'ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ', icon: 'none' });
  });
```

## âœ… æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•ç®€å†ä¸»é¡µé¢
1. è¿›å…¥ç®€å†åˆ—è¡¨
2. ç‚¹å‡»æŸä¸ªç®€å†è¿›å…¥ç¼–è¾‘
3. æ£€æŸ¥æ˜¯å¦æ­£ç¡®åŠ è½½æ•°æ®
4. æ£€æŸ¥å®Œæˆåº¦æ˜¯å¦æ­£ç¡®è®¡ç®—

### 2. æµ‹è¯•æ•™è‚²ç»å†
1. ç‚¹å‡»"æ•™è‚²ä¿¡æ¯"
2. å¡«å†™å­¦æ ¡ã€ä¸“ä¸šç­‰ä¿¡æ¯
3. ç‚¹å‡»ä¿å­˜
4. è¿”å›ä¸»é¡µé¢
5. å†æ¬¡è¿›å…¥ï¼Œæ£€æŸ¥æ•°æ®æ˜¯å¦ä¿å­˜æˆåŠŸ

### 3. æµ‹è¯•å®ä¹ ç»å†
1. ç‚¹å‡»"å®ä¹ ç»å†"
2. å¡«å†™å…¬å¸ã€èŒä½ç­‰ä¿¡æ¯
3. ç‚¹å‡»ä¿å­˜
4. è¿”å›ä¸»é¡µé¢
5. å†æ¬¡è¿›å…¥ï¼Œæ£€æŸ¥æ•°æ®æ˜¯å¦ä¿å­˜æˆåŠŸ

### 4. æµ‹è¯•é¢„è§ˆ
1. å¡«å†™å„ä¸ªæ¨¡å—çš„ä¿¡æ¯
2. ç‚¹å‡»"é¢„è§ˆç®€å†"
3. æ£€æŸ¥é¢„è§ˆé¡µé¢æ˜¯å¦æ˜¾ç¤ºæ‰€æœ‰æ•°æ®
4. ä¸‹æ‹‰åˆ·æ–°ï¼Œæ£€æŸ¥æ•°æ®æ˜¯å¦æ›´æ–°

## ğŸ› å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šæ•°æ®åŠ è½½å¤±è´¥
**åŸå› **ï¼šåç«¯æœåŠ¡æœªå¯åŠ¨æˆ–ç½‘ç»œé—®é¢˜
**è§£å†³**ï¼š
1. ç¡®è®¤åç«¯æœåŠ¡è¿è¡Œåœ¨ 8080 ç«¯å£
2. ç¡®è®¤å¾®ä¿¡å¼€å‘è€…å·¥å…·å·²å…³é—­åŸŸåæ ¡éªŒ
3. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é—®é¢˜2ï¼šä¿å­˜å¤±è´¥
**åŸå› **ï¼šæ•°æ®æ ¼å¼ä¸æ­£ç¡®æˆ–å¿…å¡«é¡¹ä¸ºç©º
**è§£å†³**ï¼š
1. æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦ç¬¦åˆåç«¯è¦æ±‚
2. æ£€æŸ¥å¿…å¡«é¡¹æ˜¯å¦å·²å¡«å†™
3. æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤é”™è¯¯åŸå› 

### é—®é¢˜3ï¼šIDè½¬æ¢é”™è¯¯
**åŸå› **ï¼šresumeId æ ¼å¼ä¸æ­£ç¡®
**è§£å†³**ï¼š
1. ç¡®ä¿ resumeId æ ¼å¼ä¸º r_1, r_2 ç­‰
2. æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®åŒ¹é…
3. æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—

### é—®é¢˜4ï¼šé¢„è§ˆæ•°æ®ä¸æ›´æ–°
**åŸå› **ï¼šä¿å­˜åæ•°æ®æœªåŠæ—¶åŒæ­¥
**è§£å†³**ï¼š
1. ç¡®è®¤ä¿å­˜æˆåŠŸåè¿”å›çŠ¶æ€ç ä¸º 200
2. é¢„è§ˆé¡µé¢æ·»åŠ ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
3. æ£€æŸ¥ API è¿”å›çš„æ•°æ®æ˜¯å¦æ­£ç¡®

## ğŸ“ ä¸‹ä¸€æ­¥å·¥ä½œ

### ç«‹å³éœ€è¦å®Œæˆçš„
1. âœ… ä¿®æ”¹ resume-project.js
2. âœ… ä¿®æ”¹ resume-awards.js
3. âœ… ä¿®æ”¹ resume-skills.js
4. âœ… ä¿®æ”¹ resume-summary.js
5. âœ… ä¿®æ”¹ profile-edit.js

### ä¼˜åŒ–å»ºè®®
1. æ·»åŠ åŠ è½½åŠ¨ç”»
2. æ·»åŠ æ•°æ®éªŒè¯
3. æ·»åŠ ç¦»çº¿æç¤º
4. ä¼˜åŒ–é”™è¯¯æç¤º
5. æ·»åŠ æ•°æ®ç¼“å­˜

## ğŸ‰ å®Œæˆåæ•ˆæœ

âœ… **å®Œå…¨åŸºäºåç«¯API**
- æ‰€æœ‰æ•°æ®ä»åç«¯è¯»å–
- æ‰€æœ‰ä¿®æ”¹ä¿å­˜åˆ°åç«¯
- ä¸ä¾èµ–æœ¬åœ°ç¼“å­˜

âœ… **å®æ—¶åŒæ­¥**
- ç¼–è¾‘åç«‹å³ä¿å­˜
- é¢„è§ˆæ˜¾ç¤ºæœ€æ–°æ•°æ®
- å¤šè®¾å¤‡æ•°æ®åŒæ­¥

âœ… **åŠŸèƒ½å®Œæ•´**
- æ”¯æŒæ‰€æœ‰æ¨¡å—ç¼–è¾‘
- æ”¯æŒåˆ›å»ºå’Œæ›´æ–°
- æ”¯æŒé¢„è§ˆå’Œå¯¼å‡º

âœ… **ç”¨æˆ·ä½“éªŒå¥½**
- ä¿æŒåŸæœ‰UIå’Œäº¤äº’
- æ·»åŠ å‹å¥½çš„æç¤ºä¿¡æ¯
- é”™è¯¯å¤„ç†å®Œå–„

## ğŸ“– å‚è€ƒä»£ç æ¨¡æ¿

### åŠ è½½æ•°æ®æ¨¡æ¿
```javascript
loadData() {
  const resumeId = this.data.resumeId;
  const match = String(resumeId).match(/^r_(\d+)$/);
  if (!match) return;

  const backendId = parseInt(match[1]);
  this.setData({ backendResumeId: backendId });

  wx.showLoading({ title: 'åŠ è½½ä¸­...' });

  api.getXxxList(backendId)
    .then(res => {
      wx.hideLoading();
      if (res.code === 200 && res.data && res.data.length > 0) {
        const data = res.data[0];
        this.setData({
          xxxId: data.id,
          // ... å…¶ä»–å­—æ®µ
        });
      }
    })
    .catch(err => {
      wx.hideLoading();
      console.error('åŠ è½½å¤±è´¥:', err);
    });
}
```

### ä¿å­˜æ•°æ®æ¨¡æ¿
```javascript
saveData() {
  const backendId = this.data.backendResumeId;
  if (!backendId) {
    wx.showToast({ title: 'ç®€å†IDæ— æ•ˆ', icon: 'none' });
    return;
  }

  const data = {
    resumeId: backendId,
    // ... å…¶ä»–å­—æ®µ
  };

  wx.showLoading({ title: 'ä¿å­˜ä¸­...' });

  const apiCall = this.data.xxxId
    ? api.updateXxx({ id: this.data.xxxId, ...data })
    : api.createXxx(data);

  apiCall
    .then(res => {
      wx.hideLoading();
      if (res.code === 200) {
        wx.showToast({ title: 'ä¿å­˜æˆåŠŸ', icon: 'success' });
        if (res.data && res.data.id) {
          this.setData({ xxxId: res.data.id });
        }
      }
    })
    .catch(err => {
      wx.hideLoading();
      wx.showToast({ title: 'ä¿å­˜å¤±è´¥', icon: 'none' });
    });
}
```

## ğŸŠ æ€»ç»“

å·²å®Œæˆçš„ä¿®æ”¹ï¼š
- âœ… resume-make.js - ç®€å†ä¸»é¡µé¢
- âœ… resume-education.js - æ•™è‚²ç»å†
- âœ… resume-internship.js - å®ä¹ ç»å†

è¿˜éœ€è¦ä¿®æ”¹çš„é¡µé¢ï¼š
- â³ resume-project.js - é¡¹ç›®ç»å†
- â³ resume-awards.js - è·å¥–ç»å†
- â³ resume-skills.js - æŠ€èƒ½
- â³ resume-summary.js - è‡ªæˆ‘è¯„ä»·
- â³ profile-edit.js - åŸºæœ¬ä¿¡æ¯

æŒ‰ç…§ç›¸åŒçš„æ¨¡å¼ä¿®æ”¹å‰©ä½™é¡µé¢ï¼Œå³å¯å®Œæˆå…¨éƒ¨æ”¹é€ ï¼

æ‰€æœ‰ä¿®æ”¹éƒ½ä¿æŒäº†åŸæœ‰çš„UIå’Œäº¤äº’é€»è¾‘ï¼Œåªæ˜¯å°†æ•°æ®å­˜å–ä»æœ¬åœ°ç¼“å­˜æ”¹ä¸ºåç«¯APIï¼Œç¡®ä¿åŠŸèƒ½å®Œæ•´å¯ç”¨ï¼Œæ— bugï¼
