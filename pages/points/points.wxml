<view class="page">
  <view class="nav" style="padding-top: {{statusBarHeight}}px;">
    <view class="nav-inner">
      <view class="nav-back" bindtap="onBack">
        <text class="nav-back-icon">‹</text>
        <text class="nav-back-text">返回</text>
      </view>
      <view class="nav-title">我的积分</view>
      <view class="nav-right"></view>
    </view>
  </view>

  <view class="content">
    <view class="top-fixed">
      <view class="card points-card">
        <view class="points-card-row">
          <view class="points-card-left">
            <view class="points-card-title">我的积分</view>
            <view class="points-card-value">{{pointsBalance}}</view>
          </view>
          <view class="points-card-right">
            <button class="recharge-action" hover-class="none" bindtap="onGoRecharge">充值积分</button>
          </view>
        </view>
      </view>
    </view>

    <view class="records-wrap">
      <view class="card records-card">
        <view class="section-title">积分使用记录</view>

        <scroll-view class="records-scroll" scroll-y="true">
          <view wx:if="{{!records.length}}" class="empty">
            <view class="empty-title">暂无记录</view>
          </view>

          <view wx:else class="record-list">
            <view class="record-item" wx:for="{{records}}" wx:key="id">
              <view class="record-left">
                <view class="record-title">{{item.title}}</view>
                <view class="record-time">{{item.bizTypeText}} · {{item.timeText}}</view>
              </view>
              <view class="record-right">
                <view class="record-change {{item.change > 0 ? 'plus' : 'minus'}}">{{item.change > 0 ? '+' : ''}}{{item.change}}</view>
                <view class="record-balance">余额：{{item.balanceAfter}}</view>
              </view>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>
  </view>
</view>
