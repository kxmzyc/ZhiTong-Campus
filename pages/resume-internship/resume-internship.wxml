<view class="intern-page">
  <view class="header">
    <view class="user-avatar ui-pressable" hover-class="ui-press" bindtap="goToProfile">用户</view>
    <view class="nav-container">
      <view class="nav-links">
        <view class="nav-link" bindtap="goToHome">小助手</view>
        <view class="nav-link" bindtap="goToCampus">校招</view>
        <view class="nav-link active" bindtap="goToResume">简历</view>
      </view>
    </view>
    <view class="header-right"></view>
  </view>

  <scroll-view class="intern-body" scroll-y="true">
    <view class="intern-panel">
      <view class="tips">
        <view class="tip-card">
          <view class="tip-text">填写HR较为关注基础信息，让HR能够更快的了解你，填写邮箱用于接收企业方的相关通知。</view>
        </view>
      </view>

      <view class="form">
        <view class="form-head">
          <view class="form-title">实习经历</view>
          <view class="form-trash ui-pressable" hover-class="ui-press-icon" bindtap="onClearAll">
            <image class="icon-delete" src="/images/impl/删除.svg" mode="aspectFit" />
          </view>
        </view>

        <view class="row">
          <view class="row-label">公司名称</view>
          <view class="row-right">
            <input class="row-input" placeholder="请输入" value="{{companyName}}" bindinput="onCompanyInput" bindblur="onCompanyBlur" maxlength="60" />
          </view>
        </view>
        <view wx:if="{{errors.companyName}}" class="field-error">{{errors.companyName}}</view>
        <view class="divider"></view>

        <view class="row">
          <view class="row-label">职位名称</view>
          <view class="row-right">
            <input class="row-input" placeholder="请输入" value="{{positionName}}" bindinput="onPositionInput" bindblur="onPositionBlur" maxlength="60" />
          </view>
        </view>
        <view wx:if="{{errors.positionName}}" class="field-error">{{errors.positionName}}</view>
        <view class="divider"></view>

        <view class="row">
          <view class="row-label">在职时间</view>
          <view class="row-right">
            <view class="intern-dates">
              <view class="intern-date ui-pressable" hover-class="ui-press-soft" bindtap="openStartSheet">
                <text class="row-value {{startYear ? '' : 'row-value--placeholder'}}">{{startYear ? (startYear + '-' + startMonth) : '在职时间'}}</text>
              </view>
              <text class="intern-date-mid">~</text>
              <view class="intern-date ui-pressable" hover-class="ui-press-soft" bindtap="openEndSheet">
                <text class="row-value {{endYear ? '' : 'row-value--placeholder'}}">{{endYear ? (endYear + '-' + endMonth) : '离职时间'}}</text>
              </view>
            </view>
            <image class="row-calendar" src="/images/impl/日历.svg" mode="aspectFit" />
          </view>
        </view>
        <view wx:if="{{errors.startDate}}" class="field-error">{{errors.startDate}}</view>
        <view wx:if="{{errors.endDate}}" class="field-error">{{errors.endDate}}</view>
        <view wx:if="{{errors.dateRange}}" class="field-error">{{errors.dateRange}}</view>
        <view class="divider"></view>

        <view class="desc">
          <view class="desc-label">工作描述</view>
          <view class="desc-box">
            <textarea class="desc-input" placeholder="越详细的描述越具有说服力，建议使用倒序形式，分条来描述工作职责，尽量做到用词精准，并多用一些可以量化的数据来突出个人成果以及贡献。" value="{{description}}" bindinput="onDescriptionInput" bindblur="onDescriptionBlur" maxlength="1500" auto-height />
            <view class="desc-count">{{descCount}}/1500</view>
          </view>
        </view>
        <view wx:if="{{errors.description}}" class="field-error">{{errors.description}}</view>

        <view class="form-footer">
          <view class="optimize-btn ui-pressable" hover-class="ui-press" bindtap="onOptimize">
            <text class="optimize-text">帮我优化</text>
          </view>
          <view class="points-badge ui-pressable" hover-class="ui-press-soft" bindtap="onGoPoints">
            <image class="icon-points" src="/images/impl/积分.svg" mode="aspectFit" />
            <text class="points-badge-text">{{pointsBalance}}积分</text>
          </view>
        </view>
      </view>

      <view class="safe-space"></view>
    </view>
  </scroll-view>

  <view class="footer">
    <view class="footer-inner">
      <view class="btn btn-secondary ui-pressable" hover-class="ui-press-soft" bindtap="onBack">返回</view>
      <view class="btn btn-primary ui-pressable" hover-class="ui-press" bindtap="onSave">保存</view>
    </view>
  </view>

  <view wx:if="{{sheetVisible}}" class="sheet-mask" bindtap="onSheetMaskTap">
    <view class="sheet" catchtap="noop">
      <view class="sheet-header">
        <text class="sheet-cancel" bindtap="onSheetCancel">返回</text>
        <text class="sheet-title">{{sheetTitle}}</text>
        <text class="sheet-confirm" bindtap="onSheetConfirm">确认</text>
      </view>

      <view class="sheet-body">
        <picker-view class="picker" indicator-style="height: 48px;" value="{{pickerValue}}" bindchange="onGradPickerChange">
          <picker-view-column>
            <view class="picker-item" wx:for="{{gradYears}}" wx:key="*this">{{item}}年</view>
          </picker-view-column>
          <picker-view-column>
            <view class="picker-item" wx:for="{{gradMonths}}" wx:key="*this">{{item}}月</view>
          </picker-view-column>
        </picker-view>
      </view>
    </view>
  </view>
</view>
