<view class="container">
  <view class="header">
    <view class="user-avatar ui-pressable" hover-class="ui-press" bindtap="goToProfile">用户</view>
    <view class="nav-container">
      <view class="nav-links">
        <view class="nav-link" bindtap="goToHome">小助手</view>
        <view class="nav-link" bindtap="goToCampus">校招</view>
        <view class="nav-link active">简历</view>
      </view>
    </view>
    <view class="header-right"></view>
  </view>

  <scroll-view class="body" scroll-y>
    <view class="notice">
      <view class="notice-top">
        <view class="resume-name">
          <block wx:if="{{!editingName}}">
            <text class="resume-name-text">{{resumeName}}</text>
            <view class="name-edit ui-pressable" hover-class="ui-press-icon" bindtap="onStartEditName">✎</view>
          </block>
          <block wx:else>
            <input class="name-input" value="{{nameDraft}}" maxlength="20" focus="{{true}}" bindinput="onNameInput" bindconfirm="onConfirmEditName" bindblur="onConfirmEditName" />
          </block>
        </view>
        <view class="completion">
          <text class="completion-label">简历完善度</text>
          <text class="completion-label"> {{completionAnim}}%</text>
        </view>
      </view>
      <view class="progress">
        <view class="progress-track">
          <view class="progress-fill" style="width: {{completionAnim}}%;"></view>
        </view>
      </view>
    </view>

    <view class="card profile-card ui-pressable" hover-class="ui-press-soft" bindtap="goToProfileEdit">
      <view class="profile-left">
        <view class="avatar">
          <image wx:if="{{avatarPath}}" class="avatar-img" src="{{avatarPath}}" mode="aspectFill" />
        </view>
        <view class="profile-meta">
          <view class="name">{{user.name}}</view>
          <view class="sub">{{user.school}}·{{user.degree}}·{{user.gradYear}}届</view>
        </view>
      </view>
      <view class="profile-edit">›</view>
    </view>

    <view class="section-list">
      <view class="section-item" wx:for="{{sections}}" wx:key="type">
        <view class="section-title">{{item.title}}</view>
        <view class="section-action ui-pressable" hover-class="ui-press-icon" bindtap="goToSection" data-type="{{item.type}}" data-title="{{item.title}}">{{item.action}}</view>
      </view>
    </view>

    <view class="safe-space"></view>
  </scroll-view>

  <view class="footer">
    <view class="footer-inner">
      <view class="btn btn-secondary ui-pressable" hover-class="ui-press-soft" bindtap="onBack">返回</view>
      <view class="btn btn-primary ui-pressable" hover-class="ui-press" bindtap="onPreview">预览简历</view>
    </view>
  </view>
</view>
