# 智通校园前后端联调测试指南

## 已完成的工作

### 1. 数据库配置 ✅
- 创建了 `zhitongxiaoyuan` 数据库
- 创建了以下数据表：
  - `user` - 用户表
  - `resume` - 简历表
  - `resume_education` - 教育经历表
  - `resume_internship` - 实习经历表
  - `resume_project` - 项目经历表
  - `resume_award` - 获奖经历表
  - `job` - 职位表
  - `job_application` - 职位申请表
  - `favorite` - 收藏表
  - `chat_session` - 聊天会话表
  - `chat_message` - 聊天消息表
- 插入了3条测试职位数据

### 2. 后端开发 ✅
- 创建了实体类（Entity）：
  - `Job.java` - 职位实体
  - `User.java` - 用户实体
  - `Resume.java` - 简历实体
  - `JobApplication.java` - 职位申请实体
  - `Favorite.java` - 收藏实体

- 创建了 Mapper 接口：
  - `JobMapper.java`
  - `UserMapper.java`
  - `ResumeMapper.java`
  - `JobApplicationMapper.java`
  - `FavoriteMapper.java`

- 创建了 Service 层：
  - `JobService.java` - 职位服务接口
  - `JobServiceImpl.java` - 职位服务实现

- 创建了 Controller 层：
  - `JobController.java` - 职位控制器
  - `TestController.java` - 测试控制器

- 创建了通用响应类：
  - `Result.java` - 统一响应结果类

### 3. 前端开发 ✅
- 创建了 API 工具类：
  - `utils/request.js` - HTTP 请求封装
  - `utils/api.js` - API 接口定义

- 修改了页面：
  - `pages/campus/campus.js` - 校招页面，调用后端 API 获取职位数据

### 4. 配置文件 ✅
- `application.yml` - 已配置 MySQL 连接信息
- 数据库密码：041029
- 服务端口：8080

## 后端 API 接口

### 测试接口
- `GET /api/hello` - 测试接口，验证后端服务是否正常

### 职位接口
- `GET /api/job/list` - 获取所有职位列表
- `GET /api/job/{id}` - 获取职位详情
- `GET /api/job/city/{city}` - 根据城市查询职位
- `GET /api/job/industry/{industry}` - 根据行业查询职位
- `GET /api/job/type/{jobType}` - 根据职位类型查询

## 测试步骤

### 第一步：启动后端服务

**方式1：使用 IntelliJ IDEA（推荐）**
1. 在 IDEA 中打开项目 `G:\claude\ZhiTongXiaoYuan`
2. 等待 Maven 依赖下载完成
3. 找到 `src/main/java/com/example/ZhiTongXiaoYuan/ZhiTongXiaoYuanApplication.java`
4. 右键点击，选择 `Run 'ZhiTongXiaoYuanApplication'`
5. 等待启动完成，看到 "Started ZhiTongXiaoYuanApplication" 日志

**方式2：使用 Maven 命令行**
```bash
cd G:\claude\ZhiTongXiaoYuan
mvn spring-boot:run
```

### 第二步：测试后端接口

**使用浏览器测试：**
1. 打开浏览器，访问：`http://localhost:8080/api/hello`
   - 应该返回：
   ```json
   {
     "code": 200,
     "message": "Hello from Spring Boot!",
     "data": "智通校园后端服务运行正常"
   }
   ```

2. 访问：`http://localhost:8080/api/job/list`
   - 应该返回职位列表（3条测试数据）

**使用 Postman 或 curl 测试：**
```bash
# 测试接口
curl http://localhost:8080/api/hello

# 获取职位列表
curl http://localhost:8080/api/job/list

# 获取职位详情
curl http://localhost:8080/api/job/1

# 根据城市查询
curl http://localhost:8080/api/job/city/深圳

# 根据行业查询
curl http://localhost:8080/api/job/industry/互联网
```

### 第三步：测试前端小程序

1. 确保后端服务已启动（端口 8080）

2. 打开微信开发者工具

3. 导入项目：
   - 项目目录：`G:\claude\ZhiTongXiaoYuan`
   - AppID：使用测试号或你的小程序 AppID

4. 在微信开发者工具中，点击右上角的"详情" -> "本地设置"
   - 勾选"不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"
   - 这样才能访问本地的 http://localhost:8080

5. 点击"编译"，启动小程序

6. 进入"校招"页面（底部导航栏第二个）
   - 应该能看到从后端加载的职位数据
   - 如果加载失败，会显示提示信息并使用模拟数据

### 第四步：验证前后端联调

**成功标志：**
1. 后端控制台显示 SQL 查询日志
2. 小程序"校招"页面显示从数据库加载的职位数据
3. 职位信息包括：公司名称、职位名称、薪资范围、城市等

**调试技巧：**
1. 打开微信开发者工具的"调试器" -> "Console"，查看网络请求和错误信息
2. 查看后端控制台日志，确认是否收到请求
3. 如果连接失败，检查：
   - 后端服务是否启动
   - 端口 8080 是否被占用
   - 防火墙是否阻止了连接

## 常见问题

### 1. 后端启动失败
- **问题**：数据库连接失败
- **解决**：检查 MySQL 服务是否启动，密码是否正确

### 2. 前端无法访问后端
- **问题**：小程序提示"网络连接失败"
- **解决**：
  - 确认后端服务已启动
  - 在微信开发者工具中勾选"不校验合法域名"
  - 检查 `utils/request.js` 中的 API_BASE_URL 是否正确

### 3. 数据显示异常
- **问题**：职位数据格式不正确
- **解决**：检查后端返回的数据格式，确保与前端期望的格式一致

## 下一步开发建议

1. **用户登录功能**
   - 实现微信登录
   - 创建用户信息管理接口

2. **简历管理功能**
   - 创建简历 CRUD 接口
   - 前端简历编辑页面对接后端

3. **职位申请功能**
   - 实现职位申请接口
   - 查看申请记录

4. **收藏功能**
   - 实现职位收藏/取消收藏
   - 查看收藏列表

5. **AI 助手功能**
   - 集成 AI 对话接口
   - 实现职位推荐算法

## 测试数据

数据库中已插入3条测试职位：
1. Java后端开发工程师 - 腾讯科技 - 深圳 - 15K-25K
2. 前端开发工程师 - 阿里巴巴 - 杭州 - 12K-20K
3. 产品经理 - 字节跳动 - 北京 - 18K-30K

可以通过 MySQL 客户端添加更多测试数据：
```sql
USE zhitongxiaoyuan;

INSERT INTO job (title, company, city, salary_range, education_required, experience_required, job_type, industry, description, requirements, benefits, status)
VALUES ('数据分析师', '美团', '北京', '10K-18K', '本科', '应届生', '校招', '互联网', '负责数据分析和报表制作', '1. 熟悉SQL和Excel\n2. 了解Python或R语言', '五险一金、餐补', 'active');
```

## 项目结构

```
ZhiTongXiaoYuan/
├── src/main/java/com/example/ZhiTongXiaoYuan/
│   ├── ZhiTongXiaoYuanApplication.java  # 主启动类
│   ├── common/
│   │   └── Result.java                   # 统一响应结果
│   ├── config/
│   │   ├── CorsConfig.java              # 跨域配置
│   │   └── MyBatisPlusConfig.java       # MyBatis-Plus配置
│   ├── controller/
│   │   ├── TestController.java          # 测试控制器
│   │   └── JobController.java           # 职位控制器
│   ├── entity/
│   │   ├── Job.java                     # 职位实体
│   │   ├── User.java                    # 用户实体
│   │   ├── Resume.java                  # 简历实体
│   │   ├── JobApplication.java          # 职位申请实体
│   │   └── Favorite.java                # 收藏实体
│   ├── mapper/
│   │   ├── JobMapper.java               # 职位Mapper
│   │   ├── UserMapper.java              # 用户Mapper
│   │   ├── ResumeMapper.java            # 简历Mapper
│   │   ├── JobApplicationMapper.java    # 职位申请Mapper
│   │   └── FavoriteMapper.java          # 收藏Mapper
│   └── service/
│       ├── JobService.java              # 职位服务接口
│       └── impl/
│           └── JobServiceImpl.java      # 职位服务实现
├── src/main/resources/
│   ├── application.yml                   # 应用配置
│   └── sql/
│       ├── init.sql                      # 初始化脚本（含测试数据）
│       └── schema.sql                    # 表结构脚本
├── utils/
│   ├── request.js                        # HTTP请求封装
│   └── api.js                            # API接口定义
└── pages/
    └── campus/
        └── campus.js                     # 校招页面（已对接后端）
```
