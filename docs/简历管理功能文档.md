# 简历管理功能实现文档

## 功能概述

已完成智通校园项目的简历管理功能，包括：
- 简历的增删改查（CRUD）
- 教育经历管理
- 实习经历管理
- 项目经历管理
- 获奖经历管理
- 前端页面与后端 API 对接

## 后端实现

### 1. 实体类（Entity）

已创建以下实体类：
- `Resume.java` - 简历主表
- `ResumeEducation.java` - 教育经历
- `ResumeInternship.java` - 实习经历
- `ResumeProject.java` - 项目经历
- `ResumeAward.java` - 获奖经历

### 2. Mapper 接口

已创建对应的 Mapper 接口：
- `ResumeMapper.java`
- `ResumeEducationMapper.java`
- `ResumeInternshipMapper.java`
- `ResumeProjectMapper.java`
- `ResumeAwardMapper.java`

### 3. Service 层

**简历服务（ResumeService）**
- `getResumesByUserId(Long userId)` - 根据用户ID获取简历列表
- `createResume(Resume resume)` - 创建简历
- `updateResume(Resume resume)` - 更新简历
- `deleteResume(Long id)` - 删除简历
- `getResumeDetail(Long id)` - 获取简历详情

**教育经历服务（ResumeEducationService）**
- `getByResumeId(Long resumeId)` - 获取教育经历列表
- `createEducation(ResumeEducation education)` - 创建教育经历
- `updateEducation(ResumeEducation education)` - 更新教育经历
- `deleteEducation(Long id)` - 删除教育经历

**实习经历服务（ResumeInternshipService）**
- `getByResumeId(Long resumeId)` - 获取实习经历列表
- `createInternship(ResumeInternship internship)` - 创建实习经历
- `updateInternship(ResumeInternship internship)` - 更新实习经历
- `deleteInternship(Long id)` - 删除实习经历

**项目经历服务（ResumeProjectService）**
- `getByResumeId(Long resumeId)` - 获取项目经历列表
- `createProject(ResumeProject project)` - 创建项目经历
- `updateProject(ResumeProject project)` - 更新项目经历
- `deleteProject(Long id)` - 删除项目经历

**获奖经历服务（ResumeAwardService）**
- `getByResumeId(Long resumeId)` - 获取获奖经历列表
- `createAward(ResumeAward award)` - 创建获奖经历
- `updateAward(ResumeAward award)` - 更新获奖经历
- `deleteAward(Long id)` - 删除获奖经历

### 4. Controller 层

已创建以下控制器：
- `ResumeController.java` - 简历控制器
- `ResumeEducationController.java` - 教育经历控制器
- `ResumeInternshipController.java` - 实习经历控制器
- `ResumeProjectController.java` - 项目经历控制器
- `ResumeAwardController.java` - 获奖经历控制器

## API 接口文档

### 简历接口

#### 1. 获取简历列表
```
GET /api/resume/list/{userId}
```
**响应示例：**
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "name": "张三",
      "phone": "13800138000",
      "email": "zhangsan@example.com",
      "education": "本科",
      "school": "清华大学",
      "major": "计算机科学与技术",
      "createdAt": "2024-02-08T10:00:00",
      "updatedAt": "2024-02-08T10:00:00"
    }
  ]
}
```

#### 2. 获取简历详情
```
GET /api/resume/{id}
```

#### 3. 创建简历
```
POST /api/resume
Content-Type: application/json

{
  "userId": 1,
  "name": "张三",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "education": "本科",
  "school": "清华大学",
  "major": "计算机科学与技术"
}
```

#### 4. 更新简历
```
PUT /api/resume
Content-Type: application/json

{
  "id": 1,
  "name": "张三",
  "phone": "13800138001",
  "email": "zhangsan@example.com"
}
```

#### 5. 删除简历
```
DELETE /api/resume/{id}
```

### 教育经历接口

#### 1. 获取教育经历列表
```
GET /api/resume/education/list/{resumeId}
```

#### 2. 创建教育经历
```
POST /api/resume/education
Content-Type: application/json

{
  "resumeId": 1,
  "school": "清华大学",
  "major": "计算机科学与技术",
  "education": "本科",
  "startDate": "2019-09-01",
  "endDate": "2023-06-30",
  "description": "主修课程：数据结构、算法、操作系统等"
}
```

#### 3. 更新教育经历
```
PUT /api/resume/education
```

#### 4. 删除教育经历
```
DELETE /api/resume/education/{id}
```

### 实习经历接口

#### 1. 获取实习经历列表
```
GET /api/resume/internship/list/{resumeId}
```

#### 2. 创建实习经历
```
POST /api/resume/internship
Content-Type: application/json

{
  "resumeId": 1,
  "company": "腾讯科技",
  "position": "Java开发实习生",
  "startDate": "2022-07-01",
  "endDate": "2022-09-30",
  "description": "负责后端接口开发和数据库设计"
}
```

#### 3. 更新实习经历
```
PUT /api/resume/internship
```

#### 4. 删除实习经历
```
DELETE /api/resume/internship/{id}
```

### 项目经历接口

#### 1. 获取项目经历列表
```
GET /api/resume/project/list/{resumeId}
```

#### 2. 创建项目经历
```
POST /api/resume/project
Content-Type: application/json

{
  "resumeId": 1,
  "name": "在线教育平台",
  "role": "后端开发",
  "startDate": "2022-03-01",
  "endDate": "2022-06-30",
  "description": "使用Spring Boot开发RESTful API"
}
```

#### 3. 更新项目经历
```
PUT /api/resume/project
```

#### 4. 删除项目经历
```
DELETE /api/resume/project/{id}
```

### 获奖经历接口

#### 1. 获取获奖经历列表
```
GET /api/resume/award/list/{resumeId}
```

#### 2. 创建获奖经历
```
POST /api/resume/award
Content-Type: application/json

{
  "resumeId": 1,
  "name": "国家奖学金",
  "level": "国家级",
  "awardDate": "2022-12-01",
  "description": "学习成绩优异，综合排名第一"
}
```

#### 3. 更新获奖经历
```
PUT /api/resume/award
```

#### 4. 删除获奖经历
```
DELETE /api/resume/award/{id}
```

## 前端实现

### 1. API 工具类更新

已在 `utils/api.js` 中添加了所有简历相关的接口方法：
- 简历 CRUD 方法
- 教育经历 CRUD 方法
- 实习经历 CRUD 方法
- 项目经历 CRUD 方法
- 获奖经历 CRUD 方法

### 2. 页面对接

已修改 `pages/resume/resume.js`，实现：
- 从后端加载简历列表
- 创建新简历时调用后端接口
- 删除简历时调用后端接口
- 失败时使用本地存储作为备份

## 测试步骤

### 1. 启动后端服务

使用 IntelliJ IDEA 或启动脚本启动后端服务。

### 2. 测试简历接口

**使用 Postman 或 curl 测试：**

```bash
# 1. 创建简历
curl -X POST http://localhost:8080/api/resume \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 1,
    "name": "张三",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "education": "本科",
    "school": "清华大学",
    "major": "计算机科学与技术"
  }'

# 2. 获取简历列表
curl http://localhost:8080/api/resume/list/1

# 3. 获取简历详情
curl http://localhost:8080/api/resume/1

# 4. 更新简历
curl -X PUT http://localhost:8080/api/resume \
  -H "Content-Type: application/json" \
  -d '{
    "id": 1,
    "userId": 1,
    "name": "张三",
    "phone": "13800138001"
  }'

# 5. 删除简历
curl -X DELETE http://localhost:8080/api/resume/1
```

### 3. 测试教育经历接口

```bash
# 创建教育经历
curl -X POST http://localhost:8080/api/resume/education \
  -H "Content-Type: application/json" \
  -d '{
    "resumeId": 1,
    "school": "清华大学",
    "major": "计算机科学与技术",
    "education": "本科",
    "startDate": "2019-09-01",
    "endDate": "2023-06-30",
    "description": "主修课程：数据结构、算法、操作系统等"
  }'

# 获取教育经历列表
curl http://localhost:8080/api/resume/education/list/1
```

### 4. 测试前端小程序

1. 启动微信开发者工具
2. 确保后端服务已启动
3. 进入"简历"页面
4. 测试以下功能：
   - 查看简历列表（应该从后端加载）
   - 创建新简历（应该调用后端接口）
   - 删除简历（应该调用后端接口）
   - 编辑简历（跳转到编辑页面）

## 数据库表结构

### resume 表
```sql
CREATE TABLE `resume` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `user_id` BIGINT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `gender` VARCHAR(10),
  `birth_date` DATE,
  `phone` VARCHAR(20),
  `email` VARCHAR(100),
  `education` VARCHAR(20),
  `school` VARCHAR(100),
  `major` VARCHAR(100),
  `graduation_date` DATE,
  `job_intention` VARCHAR(100),
  `expected_city` VARCHAR(50),
  `expected_salary` VARCHAR(50),
  `self_evaluation` TEXT,
  `skills` TEXT,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted` TINYINT DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### resume_education 表
```sql
CREATE TABLE `resume_education` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `resume_id` BIGINT NOT NULL,
  `school` VARCHAR(100) NOT NULL,
  `major` VARCHAR(100),
  `education` VARCHAR(20),
  `start_date` DATE,
  `end_date` DATE,
  `description` TEXT,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted` TINYINT DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `idx_resume_id` (`resume_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

其他子表结构类似。

## 注意事项

1. **用户ID**：目前前端使用固定的 userId=1，后续需要集成用户登录功能后从登录信息获取真实的用户ID。

2. **日期格式**：前端传递日期时使用字符串格式（如 "2023-06-30"），后端会自动转换为 Date 类型。

3. **错误处理**：前端已实现错误处理，当后端接口调用失败时会使用本地存储作为备份。

4. **数据同步**：前端会同时保存数据到本地存储和后端，确保数据不丢失。

5. **逻辑删除**：后端使用逻辑删除（deleted 字段），数据不会真正从数据库中删除。

## 下一步开发建议

1. **用户登录功能**
   - 实现微信登录
   - 获取真实的用户ID
   - 实现用户认证和授权

2. **简历详情页面对接**
   - 修改 `resume-make.js` 页面
   - 实现简历基本信息的保存和更新

3. **简历子模块页面对接**
   - 教育经历页面对接后端
   - 实习经历页面对接后端
   - 项目经历页面对接后端
   - 获奖经历页面对接后端

4. **简历导出功能**
   - 实现简历导出为 PDF
   - 实现简历分享功能

5. **简历模板功能**
   - 提供多种简历模板
   - 支持模板切换

## 项目结构

```
src/main/java/com/example/ZhiTongXiaoYuan/
├── controller/
│   ├── ResumeController.java              # 简历控制器
│   ├── ResumeEducationController.java     # 教育经历控制器
│   ├── ResumeInternshipController.java    # 实习经历控制器
│   ├── ResumeProjectController.java       # 项目经历控制器
│   └── ResumeAwardController.java         # 获奖经历控制器
├── entity/
│   ├── Resume.java                        # 简历实体
│   ├── ResumeEducation.java               # 教育经历实体
│   ├── ResumeInternship.java              # 实习经历实体
│   ├── ResumeProject.java                 # 项目经历实体
│   └── ResumeAward.java                   # 获奖经历实体
├── mapper/
│   ├── ResumeMapper.java                  # 简历Mapper
│   ├── ResumeEducationMapper.java         # 教育经历Mapper
│   ├── ResumeInternshipMapper.java        # 实习经历Mapper
│   ├── ResumeProjectMapper.java           # 项目经历Mapper
│   └── ResumeAwardMapper.java             # 获奖经历Mapper
└── service/
    ├── ResumeService.java                 # 简历服务接口
    ├── ResumeEducationService.java        # 教育经历服务接口
    ├── ResumeInternshipService.java       # 实习经历服务接口
    ├── ResumeProjectService.java          # 项目经历服务接口
    ├── ResumeAwardService.java            # 获奖经历服务接口
    └── impl/
        ├── ResumeServiceImpl.java         # 简历服务实现
        ├── ResumeEducationServiceImpl.java
        ├── ResumeInternshipServiceImpl.java
        ├── ResumeProjectServiceImpl.java
        └── ResumeAwardServiceImpl.java
```

## 总结

简历管理功能已完整实现，包括：
- ✅ 后端 CRUD 接口
- ✅ 前端 API 对接
- ✅ 简历列表页面功能
- ✅ 教育/实习/项目/获奖经历接口

可以开始测试和使用简历管理功能了！
