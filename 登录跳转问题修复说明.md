# ç™»å½•è·³è½¬é—®é¢˜ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

**é”™è¯¯ä¿¡æ¯**:
```
switchTab:fail can not switch to no-tabBar page
```

**é”™è¯¯ä½ç½®**: `login.js:139`

## é—®é¢˜åŸå› 

`wx.switchTab` æ˜¯å¾®ä¿¡å°ç¨‹åºæä¾›çš„ APIï¼Œ**åªèƒ½ç”¨äºè·³è½¬åˆ° tabBar é¡µé¢**ã€‚

åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œ`/pages/index/index` ä¸æ˜¯ä¸€ä¸ª tabBar é¡µé¢ï¼Œæ‰€ä»¥ä½¿ç”¨ `wx.switchTab` ä¼šæŠ¥é”™ã€‚

## è§£å†³æ–¹æ¡ˆ

å°† `wx.switchTab` æ”¹ä¸º `wx.reLaunch`ã€‚

### ä¿®æ”¹å†…å®¹

**ä¿®æ”¹å‰**:
```javascript
wx.switchTab({
  url: '/pages/index/index'
});
```

**ä¿®æ”¹å**:
```javascript
wx.reLaunch({
  url: '/pages/index/index'
});
```

## å¾®ä¿¡å°ç¨‹åºè·³è½¬ API è¯´æ˜

### 1. wx.navigateTo
- **ç”¨é€”**: ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
- **ç‰¹ç‚¹**: å¯ä»¥è¿”å›ï¼ˆå·¦ä¸Šè§’æœ‰è¿”å›æŒ‰é’®ï¼‰
- **é™åˆ¶**: ä¸èƒ½è·³è½¬åˆ° tabBar é¡µé¢
- **é¡µé¢æ ˆ**: æœ€å¤š10å±‚

```javascript
wx.navigateTo({
  url: '/pages/detail/detail?id=1'
});
```

### 2. wx.redirectTo
- **ç”¨é€”**: å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
- **ç‰¹ç‚¹**: ä¸èƒ½è¿”å›ï¼ˆæ²¡æœ‰è¿”å›æŒ‰é’®ï¼‰
- **é™åˆ¶**: ä¸èƒ½è·³è½¬åˆ° tabBar é¡µé¢
- **é¡µé¢æ ˆ**: ä¸å¢åŠ 

```javascript
wx.redirectTo({
  url: '/pages/detail/detail?id=1'
});
```

### 3. wx.reLaunch
- **ç”¨é€”**: å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢
- **ç‰¹ç‚¹**: ä¸èƒ½è¿”å›ï¼Œæ¸…ç©ºé¡µé¢æ ˆ
- **é™åˆ¶**: æ— é™åˆ¶ï¼Œå¯ä»¥è·³è½¬åˆ°ä»»ä½•é¡µé¢
- **é¡µé¢æ ˆ**: æ¸…ç©ºåé‡æ–°å¼€å§‹

```javascript
wx.reLaunch({
  url: '/pages/index/index'
});
```

### 4. wx.switchTab
- **ç”¨é€”**: è·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢
- **ç‰¹ç‚¹**: åªèƒ½è·³è½¬åˆ° tabBar é¡µé¢
- **é™åˆ¶**: åªèƒ½è·³è½¬åˆ° tabBar é¡µé¢
- **é¡µé¢æ ˆ**: æ¸…ç©º

```javascript
wx.switchTab({
  url: '/pages/index/index'  // å¿…é¡»æ˜¯ tabBar é¡µé¢
});
```

### 5. wx.navigateBack
- **ç”¨é€”**: å…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢
- **ç‰¹ç‚¹**: è¿”å›åˆ°é¡µé¢æ ˆä¸­çš„æŸä¸€é¡µ
- **é™åˆ¶**: é¡µé¢æ ˆä¸­å¿…é¡»æœ‰é¡µé¢

```javascript
wx.navigateBack({
  delta: 1  // è¿”å›çš„é¡µé¢æ•°ï¼Œé»˜è®¤1
});
```

## ä»€ä¹ˆæ˜¯ tabBar é¡µé¢ï¼Ÿ

tabBar é¡µé¢æ˜¯åœ¨ `app.json` ä¸­é…ç½®äº† `tabBar` çš„é¡µé¢ã€‚

### ç¤ºä¾‹é…ç½®

```json
{
  "pages": [
    "pages/index/index",
    "pages/campus/campus",
    "pages/resume/resume",
    "pages/profile/profile"
  ],
  "tabBar": {
    "color": "#999999",
    "selectedColor": "#667eea",
    "backgroundColor": "#ffffff",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "é¦–é¡µ",
        "iconPath": "images/tab-home.png",
        "selectedIconPath": "images/tab-home-active.png"
      },
      {
        "pagePath": "pages/campus/campus",
        "text": "æ ¡æ‹›",
        "iconPath": "images/tab-campus.png",
        "selectedIconPath": "images/tab-campus-active.png"
      },
      {
        "pagePath": "pages/resume/resume",
        "text": "ç®€å†",
        "iconPath": "images/tab-resume.png",
        "selectedIconPath": "images/tab-resume-active.png"
      },
      {
        "pagePath": "pages/profile/profile",
        "text": "æˆ‘çš„",
        "iconPath": "images/tab-profile.png",
        "selectedIconPath": "images/tab-profile-active.png"
      }
    ]
  }
}
```

å¦‚æœé…ç½®äº† tabBarï¼Œé‚£ä¹ˆ `pages/index/index`ã€`pages/campus/campus`ã€`pages/resume/resume`ã€`pages/profile/profile` å°±æ˜¯ tabBar é¡µé¢ã€‚

## ç™»å½•åœºæ™¯çš„æœ€ä½³å®è·µ

### åœºæ™¯1: ç™»å½•åè·³è½¬åˆ°é¦–é¡µï¼ˆé tabBarï¼‰

```javascript
// ä½¿ç”¨ wx.reLaunch
wx.reLaunch({
  url: '/pages/index/index'
});
```

### åœºæ™¯2: ç™»å½•åè·³è½¬åˆ°é¦–é¡µï¼ˆtabBarï¼‰

```javascript
// ä½¿ç”¨ wx.switchTab
wx.switchTab({
  url: '/pages/index/index'
});
```

### åœºæ™¯3: ç™»å½•åè·³è½¬åˆ°æŒ‡å®šé¡µé¢

```javascript
// ä» URL å‚æ•°è·å–è·³è½¬åœ°å€
onLoad(options) {
  this.setData({
    redirectUrl: options.redirect || '/pages/index/index'
  });
}

// ç™»å½•æˆåŠŸåè·³è½¬
loginSuccess() {
  const url = this.data.redirectUrl;

  // åˆ¤æ–­æ˜¯å¦æ˜¯ tabBar é¡µé¢
  const tabBarPages = [
    '/pages/index/index',
    '/pages/campus/campus',
    '/pages/resume/resume',
    '/pages/profile/profile'
  ];

  if (tabBarPages.includes(url)) {
    wx.switchTab({ url });
  } else {
    wx.reLaunch({ url });
  }
}
```

## å½“å‰é¡¹ç›®çš„ä¿®æ”¹

### ä¿®æ”¹çš„æ–‡ä»¶

**æ–‡ä»¶**: `pages/login/login.js`

**ä¿®æ”¹ä½ç½®**:
1. `onLoad` æ–¹æ³•ä¸­çš„è·³è½¬ï¼ˆç¬¬15è¡Œå·¦å³ï¼‰
2. `loginToBackend` æ–¹æ³•ä¸­çš„è·³è½¬ï¼ˆç¬¬139è¡Œå·¦å³ï¼‰

**ä¿®æ”¹å†…å®¹**:
- å°† `wx.switchTab` æ”¹ä¸º `wx.reLaunch`

### ä¿®æ”¹åçš„ä»£ç 

```javascript
// onLoad æ–¹æ³•
onLoad(options) {
  // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
  if (app.checkLogin()) {
    // å·²ç™»å½•ï¼Œç›´æ¥è·³è½¬åˆ°é¦–é¡µ
    wx.reLaunch({
      url: '/pages/index/index'
    });
  }
},

// loginToBackend æ–¹æ³•
loginToBackend(code) {
  // ... çœç•¥å…¶ä»–ä»£ç 

  // ç™»å½•æˆåŠŸåè·³è½¬
  setTimeout(() => {
    wx.reLaunch({
      url: '/pages/index/index',
      success: () => {
        console.log('è·³è½¬åˆ°é¦–é¡µæˆåŠŸ');
      },
      fail: (err) => {
        console.error('è·³è½¬åˆ°é¦–é¡µå¤±è´¥:', err);
      }
    });
  }, 1500);
}
```

## å¦‚ä½•é…ç½® tabBarï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³è®©é¦–é¡µæˆä¸º tabBar é¡µé¢ï¼Œå¯ä»¥åœ¨ `app.json` ä¸­æ·»åŠ  tabBar é…ç½®ï¼š

```json
{
  "pages": [
    "pages/login/login",
    "pages/index/index",
    "pages/campus/campus",
    "pages/resume/resume",
    "pages/profile/profile"
  ],
  "tabBar": {
    "color": "#999999",
    "selectedColor": "#667eea",
    "backgroundColor": "#ffffff",
    "borderStyle": "black",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "é¦–é¡µ",
        "iconPath": "images/tab-home.png",
        "selectedIconPath": "images/tab-home-active.png"
      },
      {
        "pagePath": "pages/campus/campus",
        "text": "æ ¡æ‹›",
        "iconPath": "images/tab-campus.png",
        "selectedIconPath": "images/tab-campus-active.png"
      },
      {
        "pagePath": "pages/resume/resume",
        "text": "ç®€å†",
        "iconPath": "images/tab-resume.png",
        "selectedIconPath": "images/tab-resume-active.png"
      },
      {
        "pagePath": "pages/profile/profile",
        "text": "æˆ‘çš„",
        "iconPath": "images/tab-profile.png",
        "selectedIconPath": "images/tab-profile-active.png"
      }
    ]
  }
}
```

**æ³¨æ„**: é…ç½® tabBar åï¼Œéœ€è¦å‡†å¤‡å¯¹åº”çš„å›¾æ ‡æ–‡ä»¶ã€‚

## æ€»ç»“

### é—®é¢˜
- ä½¿ç”¨ `wx.switchTab` è·³è½¬åˆ°é tabBar é¡µé¢ä¼šæŠ¥é”™

### è§£å†³æ–¹æ¡ˆ
- æ”¹ç”¨ `wx.reLaunch` è·³è½¬

### é€‰æ‹©è·³è½¬ API çš„åŸåˆ™
- **è·³è½¬åˆ° tabBar é¡µé¢**: ä½¿ç”¨ `wx.switchTab`
- **è·³è½¬åˆ°æ™®é€šé¡µé¢ä¸”éœ€è¦è¿”å›**: ä½¿ç”¨ `wx.navigateTo`
- **è·³è½¬åˆ°æ™®é€šé¡µé¢ä¸”ä¸éœ€è¦è¿”å›**: ä½¿ç”¨ `wx.redirectTo`
- **æ¸…ç©ºé¡µé¢æ ˆé‡æ–°å¼€å§‹**: ä½¿ç”¨ `wx.reLaunch`
- **è¿”å›ä¸Šä¸€é¡µ**: ä½¿ç”¨ `wx.navigateBack`

### ç™»å½•åœºæ™¯æ¨è
- ç™»å½•æˆåŠŸåä½¿ç”¨ `wx.reLaunch` è·³è½¬åˆ°é¦–é¡µ
- è¿™æ ·å¯ä»¥æ¸…ç©ºé¡µé¢æ ˆï¼Œç”¨æˆ·æ— æ³•è¿”å›åˆ°ç™»å½•é¡µ

é—®é¢˜å·²ä¿®å¤ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸è·³è½¬äº†ï¼ğŸ‰
